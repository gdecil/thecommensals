/**
 * @license angular-dirty-form v0.0.1
 * (c) 2015 Null McNull. https://github.com/McNull
 * License: MIT
 */
!function(n){"use strict";var r=n.module("dirtyForm",[]);r.constant("dirtyFormConfig",{message:"Discard unsaved changes?",confirm:null}),r.run(["$window","dirtyFormConfig",function(n,r){r.confirm=r.confirm||function(r){return n.confirm(r)}}]),r.directive("dirtyForm",["dirtyFormLinkFn",function(n){return{restrict:"AE",require:"^form",link:n}}]),r.factory("dirtyFormLinkFn",["dirtyFormConfig","$q","$location",function(n,r,i){return function(t,o,e,c){var f=!1,a=!1;t.$on("$locationChangeStart",function(t,o){if(a)t.preventDefault();else if(c.$dirty&&!f){var u=e.dirtyForm||n.message,m=n.confirm(u);if(m!==!0){t.preventDefault(),a=!0;var d=function(n){n&&(i.$$parse(o),f=!0)};r.when(m).then(d)["catch"](function(){d(!1)})["finally"](function(){a=!1})}}})}}])}(angular);